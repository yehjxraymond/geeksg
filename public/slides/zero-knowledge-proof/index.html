<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Introduction to Zero Knowledge Proof</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="stylesheet" href="/reveal/css/reset.css" />
    <link rel="stylesheet" href="/reveal/css/reveal.css" />
    <link rel="stylesheet" href="/reveal/css/theme/black.css" id="theme" />

    <!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="/reveal/lib/css/monokai.css" />

    <!-- Printing and PDF exports -->
    <script>
      var link = document.createElement("link");
      link.rel = "stylesheet";
      link.type = "text/css";
      link.href = window.location.search.match(/print-pdf/gi)
        ? "/reveal/css/print/pdf.css"
        : "/reveal/css/print/paper.css";
      document.getElementsByTagName("head")[0].appendChild(link);
    </script>
  </head>

  <body>
    <div class="reveal">
      <!-- Any section element inside of this container is displayed as a slide -->
      <div class="slides">
        <section>
          <h4>Introduction To</h4>
          <h2>Zero Knowledge Proofs</h2>
          <small>aka ZKP</small>
          <p>
            <small>by <a href="https://geek.sg">Raymond Yeh</a></small>
          </p>
        </section>

        <section>
          <section>
            <h1>What are</h1>
            <h2>Zero Knowledge Proofs</h2>
          </section>

          <section>
            <h3>
              I'm going to proof to you that I know something, without telling
              you what is it!
            </h3>
          </section>

          <section>
            <h1>Let's play a game...</h1>
            <img src="./img/wheres-waldo-social-distancing.jpg" />
          </section>

          <section>
            <h1>Now seriously...</h1>
            <img src="./img/wheres-waldo.jpg" />
          </section>

          <section>
            <h3>Proof to me a solution exists</h3>
          </section>

          <section>
            <h3>I cut a huge stencil...</h3>
            <img src="./img/waldo-stencil.png" />
          </section>

          <section>
            <h3>...and place it over the puzzle</h3>
            <img src="./img/heres-waldo.png" />
          </section>

          <section>
            <h3>
              You are convinced that I know the solution, without knowing the
              solution itself.
            </h3>
            <div
              style="position: fixed; bottom: 0px; right:0px; font-size: 0.5em;"
            >
              <a
                href="https://medium.com/swlh/a-zero-knowledge-proof-for-wheres-wally-930c21e55399"
                >Adapted from: A zero knowledge proof for Where’s Wally</a
              >
            </div>
          </section>
        </section>

        <section>
          <section>
            <h1>Applications of ZKP</h1>
          </section>

          <section>
            <h2>Age Restrictions</h2>
            <p>
              Proof that you are over the an age limit without revealing your
              actual age.
            </p>
            <div
              style="position: fixed; bottom: 0px; right:0px; font-size: 0.5em; text-align: right;"
            >
              <a href="https://github.com/yehjxraymond/circom-experiment"
                >Circom Experiment</a
              >
              <br />
              <a href="https://github.com/yehjxraymond/zokrates-experiment"
                >Zokrates Experiment</a
              >
            </div>
          </section>

          <section>
            <h2>Anonymous Verifiable Voting</h2>
            <p>
              Proof that one has the rights to cast a vote, the vote has been
              included, and the vote tally is correct. All without revealing
              identity of voters.
            </p>
            <div
              style="position: fixed; bottom: 0px; right:0px; font-size: 0.5em; text-align: right;"
            >
              <a
                href="http://www0.cs.ucl.ac.uk/staff/J.Groth/ACNS05VoteProofFull.pdf"
                >Non-interactive Zero-Knowledge Arguments for Voting</a
              >
              <br />
              <a href="https://fc19.ifca.ai/voting/papers/PR19.pdf"
                >End-to-End Verifiable Quadratic Voting with Everlasting
                Privacy</a
              >
              <br />
              <a href="https://eprint.iacr.org/2016/400.pdf"
                >Towards Secure Quadratic Voting</a
              >
            </div>
          </section>

          <section>
            <h2>KYC (Whitelist)</h2>
            <p>
              Proof that an entity belongs to a set of valid values, while
              preserving the entity's privacy
            </p>
          </section>

          <section>
            <h2>KYC (Blacklist)</h2>
            <p>
              Proof that an entity does not belong to a set of blacklisted
              entities.
            </p>
          </section>

          <section>
            <h2>Board Membership</h2>
            <p>
              Construction of ring signatures where one can verify that the
              message comes from the group without revealing who the person is.
            </p>
          </section>

          <section>
            <h2>Accountancy</h2>
            <p>
              Proof that the computation of the balance sheet is correct without
              showing all items on the sheets.
            </p>
          </section>

          <section>
            <h2>Common Reporting Standards (CRS)</h2>
            <p>
              Proof that a financial document passes validation such as
              enumeration or integer ranges.
            </p>
          </section>

          <section>
            <h2>Solvency</h2>
            <p>
              Proof that a financial institute has sufficient reserves to settle
              at least x% of accounts.
            </p>
          </section>

          <section>
            <h2>And More...</h2>
            <small>
              <a href="https://arxiv.org/pdf/1907.06381.pdf"
                >https://arxiv.org/pdf/1907.06381.pdf</a
              >
            </small>
          </section>
        </section>

        <section>
          <section>
            <h1>Lay of the Land</h1>
            <small
              >Where Do We Come From? What Are We? Where Are We Going?</small
            >
          </section>

          <section>
            <h3>State of ZKP</h3>
            <img src="./img/zkp-state.png" style="margin: 0px;" />
            <small
              ><a href="https://harryr.github.io/zklangs/"
                >High-Level languages for zkSNARKs, Fully-Homomorphic-Encryption
                and Multi-Party-Computation</a
              ></small
            >
          </section>

          <section>
            <h1>ZK-SNARKS</h1>
            <small
              >Zero-Knowledge Succinct Non-Interactive Argument of
              Knowledge</small
            >
            <div
              style="position: fixed; bottom: 0px; right:0px; font-size: 0.5em; text-align: right;"
            >
              <a href="https://z.cash/technology/zksnarks/"
                >What are ZK-SNARKS by ZCash</a
              >
            </div>
          </section>

          <section>
            <h2>Succinct</h2>
            <ul>
              <li>Proofs verified within a few milliseconds</li>
              <li>Proof length of only a few hundred bytes</li>
            </ul>
          </section>

          <section>
            <h2>Non-Interactive</h2>
            Proof consists of a single message sent from prover to verifier
          </section>

          <section>
            <h2>Construction</h2>
            <img src="./img/zkp-compilation.png" />
            <div
              style="position: fixed; bottom: 0px; right:0px; font-size: 0.5em; text-align: right;"
            >
              <a
                href="https://medium.com/@VitalikButerin/quadratic-arithmetic-programs-from-zero-to-hero-f6d558cea649"
                >Quadratic Arithmetic Programs: from Zero to Hero by Vitalik</a
              >
            </div>
          </section>
        </section>

        <section>
          <section>
            <h1>Writing ZKP Application</h1>
          </section>

          <section>
            <h2>Choose your language</h2>
            <img src="./img/red-blue-pill.jpg" />
            <p>
              <small
                ><a href="https://toggl.com/programming-princess/"
                  >https://toggl.com/programming-princess/</a
                ></small
              >
            </p>
          </section>

          <section>
            <h2>Blue Pill - Zokrates</h2>
            <ul>
              <li>High level ZKP library</li>
              <li>Lower learning curve</li>
              <li>Tutorial sucks less</li>
              <li>Deployed on Ethereum</li>
            </ul>
          </section>

          <section>
            <h2>Red Pill - Zircom</h2>
            <ul>
              <li>Low level ZKP library</li>
              <li>High learning curve</li>
              <li>Tutorial sucks</li>
              <li>ZKP ≠ blockchain</li>
              <li>Test in JS</li>
              <li>JS library for web app</li>
            </ul>
          </section>
        </section>

        <section>
          <section>
            <h1>What Are We Building?</h1>
          </section>

          <section>
            <h4>
              Construct a government-issued document that allow the citizen to
              prove that he is above a certain age without revealing the age.
            </h4>
          </section>

          <section>
            <h2>
              Approach
            </h2>
          </section>

          <section>
            <h4>
              I know of a number, x, that is greater than 21.
            </h4>
            <small>
              But I won't tell you what x is.
            </small>
          </section>

          <section>
            <h4>Simple Comparison Circuit</h4>
            <img src="./img/circuit-simple-comparison.png" />
          </section>

          <section>
            <h4>
              I know of a number, x, such that y-x >= z. Where y is the current
              year and z is the age restriction.
            </h4>
            <small>
              But I won't tell you what x is. You may see y and z though.
            </small>
          </section>

          <section>
            <h4>Generic Comparison Circuit</h4>
            <img src="./img/circuit-generic-comparison.png" />
          </section>

          <section>
            <h4>
              I know of a number, x, such that f(x) = a. Where a has been
              attested by the government to be a valid evidence about my age.
            </h4>
            <small>
              But I won't tell you what x is. You can verify a though.
            </small>
          </section>

          <section>
            <h4>With Public Commitment</h4>
            <img src="./img/circuit-commitment.png" />
          </section>

          <section>
            <h4>Final Circuit</h4>
            <small>(with rainbow table attack protection)</small>
            <img src="./img/circuit-commitment-secured.png" />
          </section>
        </section>

        <section>
          <section>
            <h1>Zokrates</h1>
          </section>

          <section>
            <h2>Zokrates</h2>
            <div>
              <img src="./img/zokrates.png" style="width: 50%" />
            </div>
            <small>
              <a href="https://github.com/Zokrates/ZoKrates">
                https://github.com/Zokrates/ZoKrates
              </a>
            </small>
          </section>
          <section>
            <h2>Installation</h2>
            <pre>
              <code class="text" data-trim>
                curl -LSfs get.zokrat.es | sh
              </code>
            </pre>
          </section>
          <section>
            <h2>Age Check Circuit</h2>
            <img src="./img/circuit-generic-comparison.png" />
          </section>
          <section>
            <h2>Age Check Circuit</h2>
            <small>ageCheck.zok</small>
            <pre>
              <code data-trim>
                def main(private field birthYear, field comparisonYear, field minimumDifference) -> (field):
                    field result = if comparisonYear - birthYear >= minimumDifference then 1 else 0 fi
                    return result
              </code>
            </pre>
          </section>
          <section>
            <h2>Running the circuit</h2>
            <pre>
              <code class="text" data-trim>
                zokrates compile -i ageCheck.zok
                zokrates setup
                zokrates compute-witness -a 1990 2020 21
                zokrates generate-proof
                zokrates export-verifier
              </code>
            </pre>
          </section>

          <section>
            <h4>Deploy Verification Contract</h4>
            <img src="./img/remix-zokrates.png" style="width: 80%" />
          </section>

          <section>
            <h4>Verify Proof</h4>
            <img src="./img/remix-zokrates-verify.png" />
          </section>

          <section>
            <h4>Pay Attention to the Inputs</h4>
            <img src="./img/remix-zokrates-input-simple.png" />
          </section>

          <section>
            <h2>Birth Year Check Circuit</h2>
            <img src="./img/circuit-hash.png" />
          </section>

          <section>
            <h2>Birth Year Check Circuit</h2>
            <small>birthYearCheck.zok</small>
            <pre>
              <code data-trim>
                import "hashes/sha256/512bitPacked" as sha256packed

                def main(private field birthYear, private field rand1, private field rand2, field hash1, field hash2) -> (field):
                    h = sha256packed([0, birthYear, rand1, rand2])
                    h[0] == hash1
                    h[1] == hash2
                    return 1
              </code>
            </pre>
          </section>

          <section>
            <h2>Running the circuit</h2>
            <pre>
              <code class="text" data-trim>
                zokrates compile -i birthYearCheck.zok
                zokrates setup
                zokrates compute-witness -a 1990 123 123 233770742581153321658241226707865859106 161843013006795803511295431198461913882
                zokrates generate-proof
                zokrates export-verifier
              </code>
            </pre>
          </section>

          <section>
            <h2>Complete Circuit</h2>
            <img src="./img/circuit-commitment-secured.png" />
          </section>

          <section>
            <h2>Complete Circuit</h2>
            <small>complete.zok</small>
            <pre>
              <code data-trim>
                import "hashes/sha256/512bitPacked" as sha256packed

                def birthYearCheck(private field birthYear, private field rand1, private field rand2, field hash1, field hash2) -> (field):
                    h = sha256packed([0, birthYear, rand1, rand2])
                    h[0] == hash1
                    h[1] == hash2
                    return 1

                def ageCheck(private field birthYear, field comparisonYear, field minimumDifference) -> (field):
                    field result = if comparisonYear - birthYear >= minimumDifference then 1 else 0 fi
                    return result

                def main(private field birthYear, private field rand1, private field rand2, field hash1, field hash2, field comparisonYear, field minimumDifference) -> (field):
                    birthYearTest = birthYearCheck(birthYear, rand1, rand2, hash1, hash2)
                    birthYearTest == 1
                    ageTest = ageCheck(birthYear, comparisonYear, minimumDifference)
                    ageTest == 1
                    return 1
              </code>
            </pre>
          </section>

          <section>
            <h2>Running the circuit</h2>
            <pre>
              <code class="text" data-trim>
                zokrates compile -i complete.zok
                zokrates setup
                zokrates compute-witness -a 1990 123 123 233770742581153321658241226707865859106 161843013006795803511295431198461913882 2020 21
                zokrates generate-proof
                zokrates export-verifier
              </code>
            </pre>
          </section>

          <section>
            <h2>Verify Proof</h2>
            <img src="./img/remix-zokrates-input-complete.png" />
            <small>(note the inputs and proof length)</small>
          </section>
        </section>

        <section>
          <section>
            <h1>Circom</h1>
          </section>

          <section>
            <h2>Circom</h2>
            <div>
              <img src="./img/circom.png" />
            </div>
            <div>
              <small>
                <a href="https://github.com/iden3/circom">
                  https://github.com/iden3/circom
                </a>
              </small>
            </div>
            <div>
              <small>
                <a href="https://github.com/iden3/snarkjs">
                  https://github.com/iden3/snarkjs
                </a>
              </small>
            </div>
          </section>
          <section>
            <h2>Installation</h2>
            <pre>
              <code class="text" data-trim>
                  npm install -g circom
                  npm install -g snarkjs
              </code>
            </pre>
          </section>
          <section>
            <h2>Age Check Circuit</h2>
            <img src="./img/circuit-generic-comparison.png" />
          </section>

          <section>
            <h2>Age Check Circuit</h2>
            <small>ageCheck.circom</small>
            <pre>
              <code data-trim>
                template AgeCheck() {
                  signal private input birthYear;
                  signal input comparisonYear;
                  signal input minimumDifference;
                  signal output results;
              
                  results &lt;-- (comparisonYear - birthYear - minimumDifference)>=0 ? 1 : 0;
                }     
                component main = AgeCheck();    
              </code>
            </pre>
          </section>

          <section>
            <h2>Circuit Inputs</h2>
            <small>input.json</small>
            <pre>
              <code class="json" data-trim>
                {
                  "birthYear": 1990,
                  "comparisonYear": 2020,
                  "minimumDifference": 21
                }      
              </code>
            </pre>
          </section>

          <section>
            <h2>Running the circuit</h2>
            <pre>
              <code class="text" data-trim>
                circom ageCheck.circom --r1cs --wasm --sym
                snarkjs info -r ageCheck.r1cs
                snarkjs setup -r ageCheck.r1cs
                snarkjs calculatewitness --wasm ageCheck.wasm --input input.json --witness witness.json
                snarkjs proof --witness witness.json --proof proof.json
                snarkjs verify --proof proof.json
                snarkjs generateverifier
                snarkjs generatecall
              </code>
            </pre>
          </section>

          <section>
            <h4>Verify Proof</h4>
            <img src="./img/remix-circom-input-simple.png" />
          </section>

          <section>
            <h2>Birth Year Circuit</h2>
            <img src="./img/circuit-hash.png" />
          </section>

          <section>
            <h2>Pedersen Hash Component</h2>
            <small>pedersenHash.circom</small>
            <pre>
              <code data-trim>
                include "../node_modules/circomlib/circuits/pedersen.circom";
                include "../node_modules/circomlib/circuits/bitify.circom";

                template PedersenHash() {
                    signal private input message[2];
                    signal output out[2];
                    
                    component pedersen = Pedersen(256);
                    component inputBits[2] = Num2Bits(128);

                    inputBits[0].in &lt;== message[0];
                    inputBits[1].in &lt;== message[1];

                    for(var i=0; i<128; i++){
                        pedersen.in[i] &lt;== inputBits[0].out[i];
                        pedersen.in[i+128] &lt;== inputBits[1].out[i];
                    }

                    out[0] &lt;== pedersen.out[0];
                    out[1] &lt;== pedersen.out[1];
                }
                component main = PedersenHash();
              </code>
            </pre>
          </section>

          <section>
            <h2>Circuit Inputs</h2>
            <small>input.json</small>
            <pre>
              <code class="json" data-trim>
                {
                  "message": [
                    1990,
                    1990
                  ]
                }      
              </code>
            </pre>
          </section>

          <section>
            <h2>Complete Circuit</h2>
            <img src="./img/circuit-commitment-secured.png" />
          </section>

          <section>
            <h2>Complete Circuit</h2>
            <small>complete.circom</small>
            <pre>
              <code class="text" data-trim>
                include "../node_modules/circomlib/circuits/pedersen.circom";
                include "../node_modules/circomlib/circuits/bitify.circom";

                template AgeCheck() {
                  signal private input birthYear;
                  signal input comparisonYear;
                  signal input minimumDifference;
                  signal output results;
              
                  results &lt;-- (comparisonYear - birthYear - minimumDifference)>=0 ? 1 : 0;
                }              

                template PedersenHash() {
                    signal private input message[2];
                    signal output out[2];
                    
                    component pedersen = Pedersen(256);
                    component inputBits[2] = Num2Bits(128);

                    inputBits[0].in &lt;== message[0];
                    inputBits[1].in &lt;== message[1];

                    for(var i=0; i<128; i++){
                        pedersen.in[i] &lt;== inputBits[0].out[i];
                        pedersen.in[i+128] &lt;== inputBits[1].out[i];
                    }

                    out[0] &lt;== pedersen.out[0];
                    out[1] &lt;== pedersen.out[1];
                }
                
                template Complete() {
                  signal private input birthYear;
                  signal private input rand;
                  signal input hash[2];
                  signal input comparisonYear;
                  signal input minimumDifference;
                  signal output results;
              
                  signal computedHash[2];
                  signal comparisons[2];
              
                  component pedersen = PedersenHash();
                  component ageCheck = AgeCheck();
              
                  pedersen.message[0] &lt;== birthYear;
                  pedersen.message[1] &lt;== rand;
                  computedHash[0] &lt;== pedersen.out[0];
                  computedHash[1] &lt;== pedersen.out[1];
              
                  comparisons[0] &lt;--  computedHash[0]==hash[0];
                  comparisons[1] &lt;--  computedHash[1]==hash[1];
                  
                  ageCheck.birthYear &lt;== birthYear;
                  ageCheck.comparisonYear &lt;== comparisonYear;
                  ageCheck.minimumDifference &lt;== minimumDifference;
              
                  results &lt;-- comparisons[0] * comparisons[0] * ageCheck.results;
              }
              
              component main = Complete();
              </code>
            </pre>
          </section>

          <section>
            <h2>Circuit Inputs</h2>
            <small>input.json</small>
            <pre>
              <code class="json" data-trim>
                {
                  "birthYear": 1990,
                  "rand": 1990,
                  "hash": [
                    "20687928115026053699926515049138692070100647654038300385721779911896219193902",
                    "11072087695851230221153980887306278529192602579917930578016623940159289561376"
                  ],
                  "comparisonYear": 2020,
                  "minimumDifference": 21
                }
              </code>
            </pre>
          </section>

          <section>
            <h2>Running the circuit</h2>
            <pre>
              <code class="text" data-trim>
                circom complete.circom --r1cs --wasm --sym
                snarkjs info -r complete.r1cs
                snarkjs setup -r complete.r1cs
                snarkjs calculatewitness --wasm complete.wasm --input input.json --witness witness.json
                snarkjs proof --witness witness.json --proof proof.json
                snarkjs verify --proof proof.json
                snarkjs generateverifier
                snarkjs generatecall
              </code>
            </pre>
          </section>

          <section>
            <h2>Testing</h2>
            <img src="./img/circom-test.png" style="width: 60%" />
          </section>

          <section>
            <h2>Verify on Web App</h2>
            <img src="./img/circom-web-verify.png" />
          </section>
        </section>

        <section>
          <section>
            <h1>Ending Notes</h1>
            <ul>
              <li class="fragment">ZKP = Proof of knowledge</li>
              <li class="fragment">Constraints are your building block</li>
              <li class="fragment">ZKP ≠ Blockchain</li>
              <li class="fragment">ZKP ≠ Panacea</li>
              <li class="fragment">You may not have one ZKP in blue</li>
            </ul>
          </section>
          <section>
            <img src="./img/color-blockchain.png" />
            <div
              style="position: fixed; bottom: 0px; right:0px; font-size: 0.5em; text-align: right;"
            >
              <a href="https://www.itjungle.com/2019/11/04/blockchain-fine-wine-and-the-ibm-i/"
                >Blockchain, Fine Wine, And The IBM i
                </a
              >
            </div>
          </section>
          <section>
            <h1>End</h1>
            <ul>
              <li>https://github.com/yehjxraymond/circom-experiment</li>
              <li>https://github.com/yehjxraymond/zokrates-experiment</li>
            </ul>
          </section>
        </section>
      </div>
    </div>

    <script src="/reveal/js/reveal.js"></script>

    <script>
      // More info https://github.com/hakimel/reveal.js#configuration
      Reveal.initialize({
        controls: true,
        progress: true,
        center: true,
        hash: true,

        transition: "slide", // none/fade/slide/convex/concave/zoom

        // More info https://github.com/hakimel/reveal.js#dependencies
        dependencies: [
          {
            src: "/reveal/plugin/markdown/marked.js",
            condition: function() {
              return !!document.querySelector("[data-markdown]");
            },
          },
          {
            src: "/reveal/plugin/markdown/markdown.js",
            condition: function() {
              return !!document.querySelector("[data-markdown]");
            },
          },
          { src: "/reveal/plugin/highlight/highlight.js", async: true },
          { src: "/reveal/plugin/search/search.js", async: true },
          { src: "/reveal/plugin/zoom-js/zoom.js", async: true },
          { src: "/reveal/plugin/notes/notes.js", async: true },
        ],
      });
    </script>
  </body>
</html>
